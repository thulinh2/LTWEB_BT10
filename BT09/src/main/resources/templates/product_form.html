<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>Product Form</title>
  <style>
    body{font-family:Arial;margin:20px;}
    input,textarea,select,button{padding:6px;margin:4px 0;display:block;width:300px;}
    .error{color:red;}
    .nav{margin-bottom:12px;}
  </style>
</head>
<body>
  <div class="nav"><a href="/admin/product">← Back to Products</a></div>
  <h1 th:text="${product.id == null} ? 'Tạo Product' : 'Sửa Product'"></h1>

  <form th:action="${product.id == null} ? @{/admin/product/create} : @{/admin/product/edit/{id}(id=${product.id})}"
        th:object="${product}" method="post">

    <div>
      <label>Title:</label>
      <input type="text" th:field="*{title}" placeholder="Title">
      <div class="error" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></div>
    </div>

    <div>
      <label>Price:</label>
      <input type="number" step="0.01" th:field="*{price}" placeholder="Price">
      <div class="error" th:if="${#fields.hasErrors('price')}" th:errors="*{price}"></div>
    </div>

    <div>
      <label>Quantity:</label>
      <input type="number" th:field="*{quantity}" placeholder="Quantity">
      <div class="error" th:if="${#fields.hasErrors('quantity')}" th:errors="*{quantity}"></div>
    </div>

    <div>
      <label>Description:</label>
      <textarea th:field="*{description}" placeholder="Description"></textarea>
      <div class="error" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
    </div>

    <div>
      <label>User:</label>
      <select th:field="*{user.id}">
        <option value="">-- Chọn user --</option>
        <option th:each="u : ${users}" th:value="${u.id}" th:text="${u.fullname}"></option>
      </select>
      <div class="error" th:if="${#fields.hasErrors('user')}" th:errors="*{user}"></div>
    </div>

    <button type="submit" th:text="${product.id == null} ? 'Create' : 'Update'"></button>
  </form>
</body>
</html>
